---
import Layout from "src/layouts/Layout.astro";
---

<Layout title="Athomik Nails - Reserva">
    <div class="p-6 mt-12 inline-flex absolute">
        <a href="/" class=" inline-flex justify-start place-self-centerborder p-2 rounded-full animate-pulse border  border-athomik-white">Volver </a>
    </div>
    <main class="w-dvw h-dvh items-center flex flex-col justify-center">
    <div
        class="flex flex-col justify-center items-center gap-4 md:items-start md:ml-4"
    >
        <h1
            class="text-nowrap text-5xl lg:text-7xl xl:text-8xl text-athomik-pink mb-8 border-b-2 border-athomik-white"
        >
            Reserva de Turno:
        </h1>
        <form action="#" class="flex flex-col gap-4" id="reservaForm">
            <div class="flex justify-between">
                <label for="calendar">Fecha de Reserva:</label>
                <input
                    type="date"
                    id="calendar"
                    name="calendar"
                    class="calendar-input"
                    required
                />
            </div>
            <div class="flex justify-between">
                <label for="time">Hora Preferible:</label>
                <input
                    type="time"
                    id="time"
                    name="time"
                    class="calendar-input"
                    min="09:00"
                    max="18:00"
                    required
                />
            </div>
            <div class="flex justify-between">
                <label for="servicio" class="place-content-center"
                    >Servicio:</label
                >
                <select name="servicio" id="servicio" class="calendar-input">
                    <option value="0" class="bg-athomik-pink text-white"
                        >Seleccione</option
                    >
                    <option value="1" class="bg-athomik-pink text-white"
                        >Todavia no me decido</option
                    >
                    <option value="2" class="bg-athomik-pink text-white"
                        >Semipermanente</option
                    >
                    <option value="3" class="bg-athomik-pink text-white"
                        >Capping</option
                    >
                    <option value="4" class="bg-athomik-pink text-white"
                        >Esculpidas</option
                    >
                    <option value="4" class="bg-athomik-pink text-white"
                        >Lifting</option
                    >
                    <option value="4" class="bg-athomik-pink text-white"
                        >Cejas</option
                    >
                </select>
            </div>
            <button
                type="submit"
                class="rounded bg-athomik-brown text-athomik-black p-4"
                onsubmit="reserva()"
                >Enviar solicitud de reserva por whatsapp</button
            >
        </form>
    </div>
</Layout>

<style>
    .calendar-input {
        background-color: transparent;
        color: white;
        justify-content: center;
        padding: 10px;
        font-size: 16px;
        width: 60%;
        backdrop-filter: blur(20px);
        border: 1px solid white;
        border-radius: 20px;
    }
</style>

<script>
    document
        .getElementById("reservaForm")
        .addEventListener("submit", function (e) {
            e.preventDefault(); // Prevenir el envío del formulario

            const fechaInput = document.getElementById(
                "calendar",
            ) as HTMLInputElement;
            const horaInput = document.getElementById(
                "time",
            ) as HTMLInputElement;
            const servicioInput = document.querySelector(
                "option:checked",
            ) as HTMLOptionElement;

            // Variables con los valores capturados
            const fecha = fechaInput.value;
            const hora = horaInput.value;
            const opcion = servicioInput.textContent;

            // Crear el mensaje
            const mensaje = `Hola, me gustaría reservar un turno.
            Fecha de Reserva: ${fecha}
            Hora Preferible: ${hora}
            Servicio: ${opcion}`;

            // Codificar el mensaje para la URL
            const mensajeCodificado = encodeURIComponent(mensaje);

            // Número de teléfono (reemplaza con el número real)
            const numeroTelefono = "541139064966"; // Ejemplo

            // Generar el enlace de WhatsApp
            const urlWhatsApp = `https://wa.me/${numeroTelefono}?text=${mensajeCodificado}`;

            // Imprimir el enlace o redirigir automáticamente
            console.log(mensaje);
            console.log(urlWhatsApp);
            window.open(urlWhatsApp, '_blank'); // Descomenta esta línea para abrir el enlace automáticamente
        });
</script>
